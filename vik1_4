using System;
using System.IO;
using System.Threading.Tasks;

class Program
{
    static async Task Main()
    {
        string path = @"D:\ConsoleApp9\rdndm.txt";

        try
        {
            // Создание файла и запись в него рандомной строки
            using (StreamWriter writer = new StreamWriter(path, false))
            {
                await writer.WriteAsync(GenerateRandomEnglishString(20)); // Например, длина строки - 20 символов
            }

            Console.WriteLine("Файл успешно создан: " + path);
        }
        catch (IOException e)
        {
            Console.WriteLine($"Ошибка ввода-вывода: {e.Message}");
        }

        // Чтение исходного текста файла
        string originalText = File.ReadAllText(path);
        Console.WriteLine("\nИсходный текст файла:\n" + originalText);

        int j = 1;
        int i = 2;

        string resultText = SwapLettersInWords(originalText, i, j);
        Console.WriteLine("\nТекст после обмена букв:\n" + resultText);
    }

    static string GenerateRandomEnglishString(int length)
    {
        Random rand = new Random();
        string randomString = "";

        // Генерация рандомной строки из английских букв заданной длины
        for (int i = 0; i < length; i++)
        {
            // Случайный выбор кода символа в диапазоне английских букв в ASCII
            randomString += (char)rand.Next('a', 'z' + 1);
        }

        return randomString;
    }

    static string SwapLettersInWords(string input, int i, int j)
    {
        // Разделение текста на слова
        string[] words = input.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);

        // Проход по каждому слову и выполнение обмена местами букв
        for (int k = 0; k < words.Length; k++)
        {
            // Преобразование слова в массив символов
            char[] chars = words[k].ToCharArray();

            // Проверка, что слово имеет достаточно символов для обмена
            if (i < chars.Length && j < chars.Length)
            {
                // Обмен местами i-й и j-й буквы
                char temp = chars[i];
                chars[i] = chars[j];
                chars[j] = temp;
            }

            // Преобразование массива символов обратно в слово
            words[k] = new string(chars);
        }

        // Объединение слов обратно в текст с использованием пробелов
        return string.Join(" ", words);
    }
}
